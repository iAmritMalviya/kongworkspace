# ---
# apiVersion: v1
# kind: Service
# metadata:
#   annotations:
#     konghq.com/protocol: https
#     konghq.com/plugins: my-service-one-rate-limiting 
#   name: httpbin
# spec:
#   externalName: httpbin.org
#   ports:
#     - port: 443
#       protocol: TCP
#   type: ExternalName
# ---
# apiVersion: apps/v1
# kind: Deployment
# metadata:
#      labels:
#        app: demo-example-two
#      name: demo-deployment-two
#      namespace: default
# spec:
#      replicas: 5
#      selector:
#        matchLabels:
#          app: demo-example-two
#      template:
#        metadata:
#          labels:
#            app: demo-example-two
#        spec:
#          containers:
#          - image: gcr.io/google-samples/node-hello:1.0
#            name: hello-world
#            ports:
#            - containerPort: 8080
# ---
# apiVersion: v1
# kind: Service
# metadata:
#   labels:
#     app: demo-example-two
#   name: my-service-two
#   annotations:
#     konghq.com/plugins: my-service-two-rate-limiting 
#   namespace: default
# spec:
#   ports:
#   - port: 8080
#     protocol: TCP
#     targetPort: 8080
#   selector:
#     app: demo-example-two  
# ---
# apiVersion: networking.k8s.io/v1
# kind: IngressClass
# metadata:
#   name: demo-ingressclass
#   namespace: default
# spec:
#   controller: ingress-controllers.konghq.com/kong
# ---
# apiVersion: networking.k8s.io/v1
# kind: Ingress
# metadata:
#   name: demo-ingress
#   annotations:
#    konghq.com/strip-path: "true"
#    konghq.com/plugins: key-auth-plugin   
#   namespace: default
# spec:
#   ingressClassName: kong
#   rules:
#   - http:
#       paths:
#       - path: /foo
#         pathType: Prefix
#         backend:
#           service:
#             name: httpbin
#             port:
#               number: 443 
#       - path: /my-service-two
#         pathType: ImplementationSpecific
#         backend:
#           service:
#             name: my-service-two
#             port:
#               number: 8080         
# ---
# apiVersion: configuration.konghq.com/v1
# kind: KongClusterPlugin
# metadata:
#  name: global-rate-limiting
#  namespace: default  
#  annotations:
#    kubernetes.io/ingress.class: kong
#  labels:
#    global: "true"
# config:
#  minute: 3
#  limit_by: ip
#  policy: local
# plugin: rate-limiting
# ---
# apiVersion: configuration.konghq.com/v1
# kind: KongPlugin
# metadata:
#   name: my-service-one-rate-limiting
# plugin: rate-limiting
# config:
#   minute: 4
#   policy: local
# ---
# apiVersion: configuration.konghq.com/v1
# kind: KongPlugin
# metadata:
#   name: my-service-two-rate-limiting
# plugin: rate-limiting
# config:
#   minute: 5
#   policy: local
# ---
# apiVersion: configuration.konghq.com/v1
# kind: KongPlugin
# metadata:
#   name: key-auth-plugin
# plugin: key-auth
# ---
# apiVersion: configuration.konghq.com/v1
# kind: KongConsumer
# metadata:
#  name: naga
#  annotations:
#    kubernetes.io/ingress.class: kong
# username: naga
# credentials:
# - naga-key-auth
